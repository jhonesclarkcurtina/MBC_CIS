{% extends "base.html" %}

{% block title %}Edit Member - Church Information System{% endblock %}
{% block navbar_title %}Edit Member{% endblock %}

{% block content %}
<div class="container" style="max-width: 600px;">
    <div class="card">
        <div class="card-header">
            <i class="fas fa-edit"></i> Edit Member
        </div>
        
        <form method="POST" action="{{ url_for('members.edit_member', member_id=member.id) }}">
            <div style="padding: 1.5rem;">
                <div class="form-group">
                    <label for="fullname">Full Name *</label>
                    <input type="text" id="fullname" name="fullname" class="form-control" value="{{ member.fullname }}" required>
                </div>
                
                <div class="form-group">
                    <label for="date_of_birth">Date of Birth</label>
                    <input type="date" id="date_of_birth" name="date_of_birth" class="form-control" value="{{ member.date_of_birth.strftime('%Y-%m-%d') if member.date_of_birth else '' }}">
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" name="age" class="form-control" min="0" max="150" value="{{ member.age or '' }}">
                    </div>
                    
                    <div class="form-group">
                        <label for="gender">Gender</label>
                        <select id="gender" name="gender" class="form-control">
                            <option value="">Select...</option>
                            <option value="Male" {% if member.gender == 'Male' %}selected{% endif %}>Male</option>
                            <option value="Female" {% if member.gender == 'Female' %}selected{% endif %}>Female</option>
                            <option value="Other" {% if member.gender == 'Other' %}selected{% endif %}>Other</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" name="address" class="form-control" value="{{ member.address or '' }}">
                </div>
                
                <div class="form-group">
                    <label for="contact">Contact Number</label>
                    <input type="tel" id="contact" name="contact" class="form-control" value="{{ member.contact or '' }}" placeholder="(123) 456-7890">
                </div>
                
                <div class="form-group">
                    <label for="baptism_date">Date of Baptism</label>
                    <input type="date" id="baptism_date" name="baptism_date" class="form-control" value="{{ member.baptism_date.strftime('%Y-%m-%d') if member.baptism_date else '' }}">
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="ministry_id">Ministry</label>
                        <select id="ministry_id" name="ministry_id" class="form-control">
                            <option value="">Select a ministry</option>
                            {% for ministry in ministries %}
                                <option value="{{ ministry.id }}" {% if member.ministry_id == ministry.id %}selected{% endif %}>{{ ministry.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="caregroup_id">Care Group</label>
                        <select id="caregroup_id" name="caregroup_id" class="form-control">
                            <option value="">Select a care group</option>
                            {% for cg in caregroups %}
                                <option value="{{ cg.id }}" {% if member.caregroup_id == cg.id %}selected{% endif %}>{{ cg.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                
                <div style="background-color: var(--bg-secondary); padding: 1rem; border-radius: 4px;">
                    <small style="color: var(--text-secondary);">
                        <i class="fas fa-info-circle"></i> Added on: {{ member.created_at.strftime('%B %d, %Y at %I:%M %p') }}<br>
                        Last updated: {{ member.updated_at.strftime('%B %d, %Y at %I:%M %p') }}
                    </small>
                </div>
            </div>
            
            <div class="card-footer">
                <a href="{{ url_for('members.list_members') }}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Cancel
                </a>
                <button type="submit" class="btn btn-success">
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
